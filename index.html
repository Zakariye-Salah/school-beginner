<!doctype html>
<html lang="so">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Alfatxi School â€” Results</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    :root{
      --bg: #fbfdff;
      --text: #0f172a;
      --muted: #6b7280;
      --card-shadow: 0 6px 18px rgba(15,23,42,0.04);
      --primary: #0b74ff;
      /* tiny size used for extremely compact mobile text â€” change to 5px if you really want it that tiny */
      --tiny-size: 9px;
    }
    html,body{height:100%}
    body { font-family: Inter, system-ui, Arial, sans-serif; background:var(--bg); color:var(--text); margin:0; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    .container-max { max-width:900px; margin:18px auto; padding:14px; box-sizing:border-box; }

    h1{ font-size:1.25rem; margin:0 0 6px 0; line-height:1.12; }
    p.lead{ margin:0 0 12px 0; color:var(--muted); font-size:0.95rem; }

    .card { background:#fff; border-radius:10px; padding:14px; box-shadow:var(--card-shadow); margin-bottom:12px; box-sizing:border-box; }
    .btn { cursor:pointer; border:1px solid rgba(11,116,255,0.15); background:#fff; padding:8px 12px; border-radius:8px; font-weight:600; font-size:0.95rem; }
    .btn-primary { background:var(--primary); color:#fff; border-color:var(--primary); }
    .btn-ghost { background:#fff; color:var(--text); border-color:#e6eefc; }

    input#studentId { width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #e6eefc; font-size:1rem; box-sizing:border-box; }
    .actions { margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

    /* result area table */
    #resultArea table { width: 100%; border-collapse: collapse; font-family: inherit; table-layout:auto; }
    #resultArea table th, #resultArea table td { padding: 8px 10px; text-align:center; vertical-align:middle; border-collapse:collapse; }
    #resultArea table thead tr { background:#f8fafc; }
    #resultArea table th:first-child, #resultArea table td:first-child { text-align:left; padding-left:10px; word-break:break-word; }

    /* header row (name + id on the same line) */
    .result-header { display:flex; gap:10px; align-items:baseline; flex-wrap:wrap; }
    .student-name { font-size:1.2rem; font-weight:800; }
    .student-name.slanted { display:inline-block; transform:skewX(-3deg); font-style:italic; }
    .student-meta { color:var(--muted); font-size:0.92rem; display:flex; gap:8px; align-items:center; }

    /* totals line (inline) */
    #totalsInline { margin-top:12px; display:flex; gap:14px; align-items:center; flex-wrap:nowrap; white-space:nowrap; font-weight:600; }
    .tot-item { display:inline-block; margin-right:10px; font-size:0.95rem; }
    .tiny { font-size: var(--tiny-size) !important; } /* super-compact helper */

    /* compact badges */
    #gradeBadge { padding:4px 8px; border-radius:6px; font-weight:800; font-size:0.85rem; color:#fff; display:inline-block; }

    /* actions row: include screenshot icon and print */
    .result-actions { margin-top:10px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

    /* small icons inside buttons */
    .icon { width:18px; height:18px; display:inline-block; vertical-align:middle; margin-right:6px; }

    /* loader overlay centered */
    #loaderOverlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 1100; backdrop-filter: blur(3px); background: rgba(10,15,25,0.20); }
    .loader-inner { background: rgba(255,255,255,0.98); padding: 14px 16px; border-radius: 12px; box-shadow: 0 12px 40px rgba(2,6,23,0.20); min-width:200px; max-width:90%; text-align:center; }
    .dots-wrap { display:inline-block; position:relative; width:72px; height:40px; margin-bottom:8px; }
    .dots { position:absolute; left:0; right:0; top:0; bottom:0; display:flex; align-items:center; justify-content:center; gap:8px; }
    .dot { width:10px; height:10px; background:var(--primary); border-radius:50%; transform-origin:center; animation: jump 900ms ease-in-out infinite; }
    @keyframes jump { 0% { transform: translateY(0) scale(0.96); } 25% { transform: translateY(-7px) scale(1.0); } 50% { transform: translateY(0) scale(0.96); } 100% { transform: translateY(0) scale(0.96); } }

    /* ===== mobile specific tweaks ===== */
    @media (max-width:520px){
      :root { --tiny-size: 9px; } /* you can set this to 5px if you want super tiny */
      .container-max { padding:10px; margin:8px auto; }
      h1 { font-size:1.05rem; }
      p.lead { font-size:0.88rem; }
      .card { padding:10px; border-radius:10px; }
      input#studentId { padding:8px; font-size:0.95rem; }
      .btn { padding:7px 10px; font-size:0.92rem; border-radius:8px; }
      /* very compact table */
      #resultArea table { font-size: var(--tiny-size); table-layout: fixed; }
      #resultArea table th, #resultArea table td { padding:6px 6px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
      /* let subject column wrap inside the cell (so row doesn't stack) */
      #resultArea table th:first-child, #resultArea table td:first-child { white-space:normal; width:55%; font-size:11px; }
      /* tiny totals line */
      #totalsInline { font-size: var(--tiny-size); gap:6px; }
      #totalsInline .tot-item { margin-right:8px; }
      .result-actions { flex-direction:row; gap:6px; }
      .icon { width:16px; height:16px; margin-right:4px; }
    }

    /* very small screens */
    @media (max-width:360px){
      :root { --tiny-size: 8px; }
      #resultArea table th:first-child, #resultArea table td:first-child { width:60%; }
    }

  </style>
</head>
<body>
  <div class="container-max">
    <div class="top-row" style="display:flex;align-items:flex-start;gap:10px;justify-content:space-between;flex-wrap:wrap">
      <div class="header-left" style="min-width:0;flex:1 1 auto">
        <h1>Soo dhawoow, arday!</h1>
        <p class="lead">Fadlan geli aqoonsigaaga (ID) si aad u aragto natiijooyinka.</p>
      </div>
    </div>

    <div class="card">
      <label for="studentId">Geli ID-gaaga halkan</label>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="studentId" placeholder="12345" />
        <button id="toggleIdInputBtn" class="btn" type="button" title="Hide/Show ID">ðŸ”’</button>
      </div>
      <div style="margin-top:8px" class="actions">
        <button id="searchBtn" class="btn btn-primary">Raadi</button>
        <div id="message" style="color:#c00;margin-top:0;align-self:center"></div>
      </div>
    </div>

    <div id="resultArea" style="display:none; margin-top:12px"></div>
  </div>

  <!-- centered loader overlay -->
  <div id="loaderOverlay" aria-hidden="true" role="status" aria-live="polite">
    <div class="loader-inner" role="presentation">
      <div class="dots-wrap" aria-hidden="true">
        <div class="dots" aria-hidden="true">
          <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
      </div>
      <div class="loader-message" id="loaderMessage">Fadlan sug...</div>
    </div>
  </div>

  <!-- html2canvas for screenshot capture -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- keep these for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <script type="module" src="main.js"></script>
</body>
</html>
