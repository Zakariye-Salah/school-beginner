<!doctype html>
<html lang="so">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Alfatxi School â€” Results</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    :root{
      --bg: #fbfdff;
      --text: #0f172a;
      --muted: #6b7280;
      --card-shadow: 0 6px 18px rgba(15,23,42,0.04);
      --primary: #0b74ff;
    }
    html,body{height:100%}
    body { font-family: Inter, system-ui, Arial, sans-serif; background:var(--bg); color:var(--text); margin:0; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}
    .container-max { max-width:900px; margin:18px auto; padding:14px; box-sizing:border-box; }

    h1{ font-size:1.25rem; margin:0 0 6px 0; line-height:1.12; }
    p.lead{ margin:0 0 12px 0; color:var(--muted); font-size:0.95rem; }

    .card { background:#fff; border-radius:10px; padding:14px; box-shadow:var(--card-shadow); margin-bottom:12px; box-sizing:border-box; }
    .btn { cursor:pointer; border:1px solid rgba(11,116,255,0.15); background:#fff; padding:8px 12px; border-radius:8px; font-weight:600; font-size:0.95rem; }
    .btn-primary { background:var(--primary); color:#fff; border-color:var(--primary); }
    .btn-ghost { background:#fff; color:var(--text); border-color:#e6eefc; }

    input#studentId { width:100%; padding:10px; margin-top:6px; border-radius:8px; border:1px solid #e6eefc; font-size:1rem; box-sizing:border-box; }
    .actions { margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

    /* Scoped table styles for resultArea */
    #resultArea table { width:100%; border-collapse:collapse; font-family:inherit; font-size:0.95rem; table-layout:auto; }
    #resultArea table th, #resultArea table td { padding:8px 10px; text-align:center; vertical-align:middle; word-break:break-word; border-collapse:collapse; }
    #resultArea table thead tr { background:#f8fafc; }
    /* subject column left aligned and allowed to wrap */
    #resultArea table th:first-child, #resultArea table td:first-child { text-align:left; width:48%; padding-left:8px; word-break:break-word; }

    .result-card h2 { margin:0; font-size:1.25rem; }

    /* Compact totals */
    #totalsBlock { margin-top:12px; display:flex; align-items:center; gap:14px; flex-wrap:wrap; font-size:0.95rem; }
    #ranksBlock { margin-top:8px; font-weight:600; font-size:0.95rem; color:var(--text); }

    /* loader overlay centered */
    #loaderOverlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1100;
      backdrop-filter: blur(3px);
      background: rgba(10,15,25,0.20);
    }
    .loader-inner {
      background: rgba(255,255,255,0.98);
      padding: 14px 16px;
      border-radius: 12px;
      box-shadow: 0 12px 40px rgba(2,6,23,0.20);
      min-width:200px;
      max-width:90%;
      text-align:center;
    }
    .dots-wrap { display:inline-block; position:relative; width:72px; height:40px; margin-bottom:8px; }
    .dots { position:absolute; left:0; right:0; top:0; bottom:0; display:flex; align-items:center; justify-content:center; gap:8px; }
    .dot { width:10px; height:10px; background:var(--primary); border-radius:50%; transform-origin:center; animation: jump 900ms ease-in-out infinite; }
    .dot:nth-child(2){ animation-delay: 120ms; } .dot:nth-child(3){ animation-delay: 240ms; }
    @keyframes jump { 0% { transform: translateY(0) scale(0.96); } 25% { transform: translateY(-7px) scale(1.0); } 50% { transform: translateY(0) scale(0.96); } 100% { transform: translateY(0) scale(0.96); } }
    .ring { position:absolute; inset:0; pointer-events:none; display:flex; align-items:center; justify-content:center; }
    .ring svg { width:72px; height:72px; animation: spin 3500ms linear infinite; opacity:0.12; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .loader-message { color:var(--muted); font-size:0.95rem; min-height:20px; }

    /* ===== mobile specific (compact) ===== */
    @media (max-width:520px){
      .container-max { padding:10px; margin:8px auto; }
      h1 { font-size:1.05rem; }
      p.lead { font-size:0.88rem; }
      .card { padding:10px; border-radius:10px; }
      input#studentId { padding:8px; font-size:0.95rem; }
      .btn { padding:7px 10px; font-size:0.92rem; border-radius:8px; }
      /* make table very compact */
      #resultArea table { font-size:0.82rem; }
      #resultArea table th, #resultArea table td { padding:6px 6px; }
      #resultArea table th:first-child, #resultArea table td:first-child { width:58%; padding-left:6px; font-size:0.86rem; }
      /* numeric columns shrink */
      #resultArea table th:not(:first-child), #resultArea table td:not(:first-child) { white-space:nowrap; width:auto; padding:6px 6px; font-size:0.82rem; }
      .result-card h2 { font-size:1.02rem; margin-bottom:4px; }
      #totalsBlock { gap:8px; font-size:0.92rem; display:flex; flex-direction:column; align-items:flex-start; }
      #ranksBlock { font-size:0.92rem; }
      /* shrink loader */
      .loader-inner { padding:10px; min-width:180px; }
      .dot { width:8px; height:8px; }
      .ring svg { width:56px; height:56px; }
      /* keep PDF & buttons stacked */
      .actions { flex-direction:column; align-items:flex-start; gap:8px; }
    }

    /* very small screens */
    @media (max-width:360px){
      #resultArea table { font-size:0.78rem; }
      #resultArea table th:first-child, #resultArea table td:first-child { width:60%; }
      #resultArea table th:not(:first-child), #resultArea table td:not(:first-child) { font-size:0.75rem; padding:5px 4px; }
      .btn { font-size:0.9rem; padding:6px 8px; }
    }
  </style>
</head>
<body>
  <div class="container-max">
    <div class="top-row" style="display:flex;align-items:flex-start;gap:10px;justify-content:space-between;flex-wrap:wrap">
      <div class="header-left" style="min-width:0;flex:1 1 auto">
        <h1>Soo dhawoow, arday!</h1>
        <p class="lead">Fadlan geli aqoonsigaaga (ID) si aad u aragto natiijooyinka.</p>
      </div>
    </div>

    <div class="card">
      <label for="studentId">Geli ID-gaaga halkan</label>
      <input id="studentId" placeholder="12345" />
      <div style="margin-top:8px" class="actions">
        <button id="searchBtn" class="btn btn-primary">Raadi</button>
        <div id="message" style="color:#c00;margin-top:0;align-self:center"></div>
      </div>
    </div>

    <div id="resultArea" style="display:none; margin-top:12px"></div>
  </div>

  <!-- centered loader overlay -->
  <div id="loaderOverlay" aria-hidden="true" role="status" aria-live="polite">
    <div class="loader-inner" role="presentation">
      <div class="dots-wrap" aria-hidden="true">
        <div class="ring" aria-hidden="true">
          <svg viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M18 2a16 16 0 1 0 0 32 16 16 0 1 0 0-32z" stroke="#0b74ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <div class="dots" aria-hidden="true">
          <div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>
      </div>
      <div class="loader-message" id="loaderMessage">Fadlan sug...</div>
    </div>
  </div>

  <!-- keep these; main.js unchanged -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <script type="module" src="main.js"></script>
</body>
</html>
